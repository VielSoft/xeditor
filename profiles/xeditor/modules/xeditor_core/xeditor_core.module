<?php
/**
 * @file
 * Xeditor module file.
 */

/**
 * Implements hook_init().
 */
function xeditor_core_init() {
  // Extend edit module edit.js functionality.
  $js_files = array('jquery.selection.js', 'xeditor.js');
  $js_dir = drupal_get_path('module', 'xeditor_core') . '/js/';
  $counter = 1;
  foreach ($js_files as $js_file) {
    drupal_add_js($js_dir . $js_file, array(
      'scope' => 'footer',
      'group' => JS_THEME,
      'every_page' => TRUE,
      'weight' => -$counter,
    ));
    $counter++;
  }
  // CSS file for Barley-like feel.
  drupal_add_css(drupal_get_path('module', 'xeditor_core') . '/css/xeditor.css');
}


/**
 * Implements hook_menu_alter().
 */
function xeditor_core_menu_alter(&$items) {
  // Add node "Revision" link in Contextual link.
  $items['node/%node/revisions']['type'] = MENU_LOCAL_ACTION;
  $items['node/%node/revisions']['context'] = MENU_CONTEXT_INLINE;
  return $items;
}
